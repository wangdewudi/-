!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.COS=t():e.COS=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="D:\\github\\cos-wx-sdk-v5\\demo\\lib",n(n.s=15)}([function(e,t,n){"use strict";(function(t){var r=n(12),o=n(11),i=n(10),a=n(7),s=n(6),c=(s.atob,s.btoa);function u(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var l=function(e){var t={};for(var n in e)void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t},d=function(e,t){var n,r=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,r.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?n=function(e){var n="",r=new FileReader;r.onload=function(e){for(var o=new Uint8Array(r.result),i=o.byteLength,a=0;a<i;a++)n+=String.fromCharCode(o[a]);t(n)},r.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),n.call(r,e)};function f(e){return m(e,function(e){return"object"==typeof e?f(e):e})}function h(e,t){return g(t,function(n,r){e[r]=t[r]}),e}function p(e){return e instanceof Array}function g(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function m(e,t){var n=p(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}var y={apiWrapper:function(e,t){return function(n,r){"function"==typeof n&&(r=n,n={});var o=(n=h({},n)).Headers||{};n&&"object"==typeof n&&(function(){for(var e in n)n.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(o[e]=n[e])}(),o["x-cos-mfa"]=n.MFA,o["Content-MD5"]=n.ContentMD5,o["Content-Length"]=n.ContentLength,o["Content-Type"]=n.ContentType,o.Expect=n.Expect,o.Expires=n.Expires,o["Cache-Control"]=n.CacheControl,o["Content-Disposition"]=n.ContentDisposition,o["Content-Encoding"]=n.ContentEncoding,o.Range=n.Range,o["If-Modified-Since"]=n.IfModifiedSince,o["If-Unmodified-Since"]=n.IfUnmodifiedSince,o["If-Match"]=n.IfMatch,o["If-None-Match"]=n.IfNoneMatch,o["x-cos-copy-source"]=n.CopySource,o["x-cos-copy-source-Range"]=n.CopySourceRange,o["x-cos-metadata-directive"]=n.MetadataDirective,o["x-cos-copy-source-If-Modified-Since"]=n.CopySourceIfModifiedSince,o["x-cos-copy-source-If-Unmodified-Since"]=n.CopySourceIfUnmodifiedSince,o["x-cos-copy-source-If-Match"]=n.CopySourceIfMatch,o["x-cos-copy-source-If-None-Match"]=n.CopySourceIfNoneMatch,o["x-cos-server-side-encryption"]=n.ServerSideEncryption,o["x-cos-acl"]=n.ACL,o["x-cos-grant-read"]=n.GrantRead,o["x-cos-grant-write"]=n.GrantWrite,o["x-cos-grant-full-control"]=n.GrantFullControl,o["x-cos-grant-read-acp"]=n.GrantReadAcp,o["x-cos-grant-write-acp"]=n.GrantWriteAcp,o["x-cos-storage-class"]=n.StorageClass,n.Headers=l(o));var i=function(e){return e&&e.headers&&(e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},a=function(e,t){r&&r(i(e),i(t))};if("getService"!==e&&"abortUploadTask"!==e){if(!function(e,t){var n=t.Bucket,r=t.Region,o=t.Key;return e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e?n&&r:!(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e)||n&&r&&o}(e,n))return void a({error:"lack of required params"});if(n.Region&&-1===n.Region.indexOf("-")&&"yfb"!==n.Region)return void a({error:"Region format error, find help here: https://cloud.tencent.com/document/product/436/6224"});if(n.Region&&n.Region.indexOf("cos.")>-1)return void a({error:'Region should not be start with "cos."'});if(n.Bucket){if(!/^(.+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+"-"+n.AppId;else{if(!this.options.AppId)return void a({error:'Bucket should format as "test-1250000000".'});n.Bucket=n.Bucket+"-"+this.options.AppId}n.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete n.AppId)}n.Key&&"/"===n.Key.substr(0,1)&&(n.Key=n.Key.substr(1))}var s=t.call(this,n,a);if("getAuth"===e||"getObjectUrl"===e)return s}},getAuth:function(e){var t=(e=e||{}).SecretId,n=e.SecretKey,r=(e.method||e.Method||"get").toLowerCase(),i=e.pathname||e.Key||"/",a=f(e.Query||e.params||{}),s=f(e.Headers||e.headers||{});if(0!==i.indexOf("/")&&(i="/"+i),!t)return console.error("lack of param SecretId");if(!n)return console.error("lack of param SecretKey");var c=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()},l=function(e){var t,n,r,o=[],i=c(e);for(t=0;t<i.length;t++)r=void 0===e[n=i[t]]||null===e[n]?"":""+e[n],n=u(n=n.toLowerCase()),r=u(r)||"",o.push(n+"="+r);return o.join("&")},d=parseInt((new Date).getTime()/1e3)-1,h=d,p=e.Expires||e.expires,g=t,m=d+";"+(h+=void 0===p?900:1*p||0),y=d+";"+h,v=c(s).join(";").toLowerCase(),C=c(a).join(";").toLowerCase(),x=o.HmacSHA1(y,n).toString(),A=[r,i,l(a),l(s),""].join("\n"),b=["sha1",m,o.SHA1(A).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+g,"q-sign-time="+m,"q-key-time="+y,"q-header-list="+v,"q-url-param-list="+C,"q-signature="+o.HmacSHA1(b,x).toString()].join("&")},xml2json:i,json2xml:a,md5:r,clearKey:l,getFileMd5:function(e,t){d(e,function(e){var n=r(e);t(null,n)})},binaryBase64:function(e){var t,n,r,o="";for(t=0,n=e.length/2;t<n;t++)r=parseInt(e[2*t]+e[2*t+1],16),o+=String.fromCharCode(r);return c(o)},extend:h,isArray:p,isInArray:function(e,t){for(var n=!1,r=0;r<e.length;r++)if(t===e[r]){n=!0;break}return n},each:g,map:m,filter:function(e,t){var n=p(e),r=n?[]:{};for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)&&(n?r.push(e[o]):r[o]=e[o]);return r},clone:f,uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},throttleOnProgress:function(e,t){var n,r,o=this,i=0,a=0,s=Date.now();function c(){if(r=0,t&&"function"==typeof t){n=Date.now();var o,c=Math.max(0,Math.round((a-i)/((n-s)/1e3)*100)/100);o=0===a&&0===e?1:Math.round(a/e*100)/100||0,s=n,i=a;try{t({loaded:a,total:e,speed:c,percent:o})}catch(e){}}}return function(t,n){if(t&&(a=t.loaded,e=t.total),n)clearTimeout(r),c();else{if(r)return;r=setTimeout(c,o.options.ProgressInterval)}}},isBrowser:!!t.document};e.exports=y}).call(this,n(13))},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var o=Object.create(t.prototype);r.__proto__=o}if(!(r instanceof t)){function i(){}i.prototype=t.prototype,n(r,i=new i),e.prototype=r=i}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var o="http://www.w3.org/1999/xhtml",i={},a=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,c=i.TEXT_NODE=3,u=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,d=i.ENTITY_NODE=6,f=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,g=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,y=i.NOTATION_NODE=12,v={},C={},x=(v.INDEX_SIZE_ERR=(C[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(C[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(C[3]="Hierarchy request error",3)),A=(v.WRONG_DOCUMENT_ERR=(C[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(C[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(C[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(C[7]="No modification allowed",7),v.NOT_FOUND_ERR=(C[8]="Not found",8)),b=(v.NOT_SUPPORTED_ERR=(C[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(C[10]="Attribute in use",10));v.INVALID_STATE_ERR=(C[11]="Invalid state",11),v.SYNTAX_ERR=(C[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(C[13]="Invalid modification",13),v.NAMESPACE_ERR=(C[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(C[15]="Invalid access",15);function w(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,C[e]),this.message=C[e],Error.captureStackTrace&&Error.captureStackTrace(this,w);return n.code=e,t&&(this.message=this.message+": "+t),n}function N(){}function T(e,t){this._node=e,this._refresh=t,R(this)}function R(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function _(){}function E(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function S(e,t,n,r){if(r?t[E(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&P(o,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(o,e,n))}}function k(e,t,n){var r=E(t,n);if(!(r>=0))throw w(A,new Error(e.tagName+"@"+n));for(var o=t.length-1;r<o;)t[r]=t[++r];if(t.length=o,e){var i=e.ownerDocument;i&&(P(i,e,n),n.ownerElement=null)}}function D(e){if(this._features={},e)for(var t in e)this._features=e[t]}function B(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function I(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(I(e,t))return!0}while(e=e.nextSibling)}function M(){}function P(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function F(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)r[i++]=o,o=o.nextSibling;r.length=i}}}function L(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,F(e.ownerDocument,e),t}function j(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===m){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=n?n.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=n,a?a.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return F(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function H(){this._nsMap={}}function U(){}function K(){}function G(){}function q(){}function V(){}function z(){}function X(){}function W(){}function $(){}function Q(){}function Z(){}function Y(){}function J(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,o=r.prefix,i=r.namespaceURI;if(i&&null==o&&null==(o=r.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return te(this,n,e,t,a),n.join("")}function ee(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=n.length;i--;){var a=n[i];if(a.prefix==r)return a.namespace!=o}return!0}function te(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:i||(i=[]);i.length;var d=e.attributes,y=d.length,v=e.firstChild,C=e.tagName;n=o===e.namespaceURI||n,t.push("<",C);for(var x=0;x<y;x++){"xmlns"==(A=d.item(x)).prefix?i.push({prefix:A.localName,namespace:A.value}):"xmlns"==A.nodeName&&i.push({prefix:"",namespace:A.value})}for(x=0;x<y;x++){var A;if(ee(A=d.item(x),0,i)){var b=A.prefix||"",w=A.namespaceURI,N=b?" xmlns:"+b:" xmlns";t.push(N,'="',w,'"'),i.push({prefix:b,namespace:w})}te(A,t,n,r,i)}if(ee(e,0,i)){b=e.prefix||"",w=e.namespaceURI,N=b?" xmlns:"+b:" xmlns";t.push(N,'="',w,'"'),i.push({prefix:b,namespace:w})}if(v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(C)){if(t.push(">"),n&&/^script$/i.test(C))for(;v;)v.data?t.push(v.data):te(v,t,n,r,i),v=v.nextSibling;else for(;v;)te(v,t,n,r,i),v=v.nextSibling;t.push("</",C,">")}else t.push("/>");return;case p:case m:for(v=e.firstChild;v;)te(v,t,n,r,i),v=v.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,O),'"');case c:return t.push(e.data.replace(/[<&]/g,O));case u:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case g:var T=e.publicId,R=e.systemId;if(t.push("<!DOCTYPE ",e.name),T)t.push(' PUBLIC "',T),R&&"."!=R&&t.push('" "',R),t.push('">');else if(R&&"."!=R)t.push(' SYSTEM "',R,'">');else{var _=e.internalSubset;_&&t.push(" [",_,"]"),t.push(">")}return;case f:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}w.prototype=Error.prototype,n(v,w),N.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},T.prototype.item=function(e){return R(this),this[e]},r(T,N),_.prototype={length:0,item:N.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new w(b);var n=this.getNamedItem(e.nodeName);return S(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new w(b);return t=this.getNamedItemNS(e.namespaceURI,e.localName),S(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return k(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return k(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},D.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new M;if(r.implementation=this,r.childNodes=new N,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return j(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return L(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o=new n.constructor;for(var i in n){var c=n[i];"object"!=typeof c&&c!=o[i]&&(o[i]=c)}n.childNodes&&(o.childNodes=new N);o.ownerDocument=t;switch(o.nodeType){case a:var u=n.attributes,l=o.attributes=new _,d=u.length;l._ownerElement=o;for(var f=0;f<d;f++)o.setAttributeNode(e(t,u.item(f),!0));break;case s:r=!0}if(r)for(var h=n.firstChild;h;)o.appendChild(e(t,h,r)),h=h.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==c&&e.nodeType==c?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(i,B),n(i,B.prototype),M.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),j(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),L(this,e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case a:(o=n.cloneNode(!1)).ownerDocument=t;case m:break;case s:r=!0}o||(o=n.cloneNode(!1));o.ownerDocument=t;o.parentNode=null;if(r)for(var i=n.firstChild;i;)o.appendChild(e(t,i,r)),i=i.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return I(this.documentElement,function(n){if(n.nodeType==a&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new H;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new N,(t.attributes=new _)._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new N,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Z;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new U;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new $;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new H,r=t.split(":"),o=n.attributes=new _;return n.childNodes=new N,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new U,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(M,B),H.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,F(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new T(this,function(t){var n=[];return I(t,function(r){r===t||r.nodeType!=a||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new T(this,function(n){var r=[];return I(n,function(o){o===n||o.nodeType!==a||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},M.prototype.getElementsByTagName=H.prototype.getElementsByTagName,M.prototype.getElementsByTagNameNS=H.prototype.getElementsByTagNameNS,r(H,B),U.prototype.nodeType=s,r(U,B),K.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(C[x])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(K,B),G.prototype={nodeName:"#text",nodeType:c,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(G,K),q.prototype={nodeName:"#comment",nodeType:h},r(q,K),V.prototype={nodeName:"#cdata-section",nodeType:u},r(V,K),z.prototype.nodeType=g,r(z,B),X.prototype.nodeType=y,r(X,B),W.prototype.nodeType=d,r(W,B),$.prototype.nodeType=l,r($,B),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=m,r(Q,B),Z.prototype.nodeType=f,r(Z,B),Y.prototype.serializeToString=function(e,t,n){return J.call(e,t,n)},B.prototype.toString=J;try{if(Object.defineProperty){Object.defineProperty(T.prototype,"length",{get:function(){return R(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case a:case m:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case a:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=D,t.XMLSerializer=Y},function(e,t){e.exports=function(e,t){var n,r=e.filePath,o=e.headers||{},i=e.url,a=e.method,s=e.onProgress,c=function(e,n){t(e,{statusCode:n.statusCode,headers:n.header},n.data)};if(r){var u=i.match(/^(https?:\/\/[^/]+\/)(.*)$/),l=u[2]||"";i=u[1];var d={key:l,success_action_status:200,Signature:o.Authorization},f=["Cache-Control","Content-Type","Content-Disposition","Content-Encoding","Expires","x-cos-storage-class","x-cos-security-token"];for(var l in e.headers)e.headers.hasOwnProperty(l)&&(l.indexOf("x-cos-meta-")>-1||f.indexOf(l)>-1)&&(d[l]=e.headers[l]);o["x-cos-acl"]&&(d.acl=o["x-cos-acl"]),!d["Content-Type"]&&(d["Content-Type"]=""),(n=wx.uploadFile({url:i,method:a,name:"file",filePath:r,formData:d,success:function(e){c(null,e)},fail:function(e){c(e.errMsg,e)}})).onProgressUpdate(function(e){s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend,progress:e.progress/100})})}else{var h=e.qs&&function(e){var t,n,r,o=[],i=Object.keys(e);for(t=0;t<i.length;t++)r=e[n=i[t]]||"",o.push(n+"="+encodeURIComponent(r));return o.join("&")}(e.qs)||"";h&&(i+=(i.indexOf("?")>-1?"&":"?")+h),o["Content-Length"]&&delete o["Content-Length"],wx.request({url:i,method:a,header:o,dataType:"text",data:e.body,success:function(e){c(null,e)},fail:function(e){c(e.errMsg,e)}})}return n}},function(e,t,n){"use strict";var r=n(2),o=n(0);function i(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},r=e.AccessControlList.Grant;r&&(r=o.isArray(r)?r:[r]);var i={READ:0,WRITE:0,FULL_CONTROL:0};return r.length&&o.each(r,function(r){"qcs::cam::anyone:anyone"===r.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===r.Grantee.URI?i[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&t[n[r.Permission]].push('id="'+r.Grantee.ID+'"')}),i.FULL_CONTROL||i.WRITE&&i.READ?t.ACL="public-read-write":i.READ?t.ACL="public-read":t.ACL="private",o.each(n,function(e){t[e]=a(t[e].join(","))}),t}function a(e){var t,n,r=e.split(","),o={};for(t=0;t<r.length;)o[n=r[t].trim()]?r.splice(t,1):(o[n]=!0,r[t]=n,t++);return r.join(",")}function s(e){var t=e.bucket,n=t.substr(0,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1),o=e.domain,i=e.region,a=e.object,s=e.protocol||"https:";o||(o=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(i)>-1?"{{Bucket}}-{{AppId}}.{{Region}}.myqcloud.com":"{{Bucket}}-{{AppId}}.cos.{{Region}}.myqcloud.com"),o=o.replace(/\{\{AppId\}\}/gi,r).replace(/\{\{Bucket\}\}/gi,n).replace(/\{\{Region\}\}/gi,i).replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(o)||(o=s+"//"+o),"/"===o.slice(-1)&&(o=o.slice(0,-1));var c=o;return a&&(c+="/"+encodeURIComponent(a).replace(/%2F/g,"/")),e.isLocation&&(c=c.replace(/^https?:\/\//,"")),c}function c(e,t){var n=this,r=e.Bucket||"",i=e.Region||"";n._StsMap=n._StsMap||{};var a=n._StsMap[r+"."+i]||{},s=function(){var n={Authorization:o.getAuth({SecretId:a.TmpSecretId,SecretKey:a.TmpSecretKey,Method:e.Method,Key:e.Key||"",Query:e.Query,Headers:e.Headers}),XCosSecurityToken:a.XCosSecurityToken||"",Token:a.Token||"",ClientIP:a.ClientIP||"",ClientUA:a.ClientUA||""};t&&t(n)};if(a.ExpiredTime&&a.ExpiredTime-(Date.now()/1e3>60))s();else if(n.options.getAuthorization)n.options.getAuthorization.call(n,{Bucket:r,Region:i,Method:e.Method,Key:e.Key||"",Query:e.Query,Headers:e.Headers},function(e){"string"==typeof e&&(e={Authorization:e}),e.TmpSecretId&&e.TmpSecretKey&&e.XCosSecurityToken&&e.ExpiredTime?(a=n._StsMap[r+"."+i]=e,s()):t&&t(e)});else{if(!n.options.getSTS){var c=o.getAuth({SecretId:e.SecretId||n.options.SecretId,SecretKey:e.SecretKey||n.options.SecretKey,Method:e.Method,Key:e.Key||"",Query:e.Query,Headers:e.Headers});return t&&t({Authorization:c}),c}n.options.getSTS.call(n,{Bucket:r,Region:i},function(e){(a=n._StsMap[r+"."+i]=e||{}).TmpSecretId=a.SecretId,a.TmpSecretKey=a.SecretKey,s()})}return""}function u(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=o.clearKey(e.qs),e.headers&&(e.headers=o.clearKey(e.headers)),e.qs&&(e.qs=o.clearKey(e.qs));var i=o.clone(e.qs);e.action&&(i[e.action]=""),c.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.filePath&&"POST"===e.method?"":e.Key,Query:i,Headers:e.headers},function(i){var a=i.Authorization,c=!1;if(a)if(a.indexOf(" ")>-1)c=!1;else if(a.indexOf("q-sign-algorithm=")>-1&&a.indexOf("q-ak=")>-1&&a.indexOf("q-sign-time=")>-1&&a.indexOf("q-key-time=")>-1&&a.indexOf("q-url-param-list=")>-1)c=!0;else try{(a=atob(a)).indexOf("a=")>-1&&a.indexOf("k=")>-1&&a.indexOf("t=")>-1&&a.indexOf("r=")>-1&&a.indexOf("b=")>-1&&(c=!0)}catch(e){}c?(e.AuthData=i,function(e,t){var n=this,i=e.TaskId;if(i&&!n._isRunningTask(i))return;var a=e.Bucket,c=e.Region,u=e.Key,l=e.method||"GET",d=e.url,f=e.body,h=e.json,p=e.rawBody;d=d||s({protocol:n.options.Protocol,domain:n.options.Domain,bucket:a,region:c,object:u}),e.action&&(d=d+(u?"":"/")+"?"+e.action);var g={method:l,url:d,headers:e.headers,qs:e.qs,filePath:e.filePath,body:f,json:h};g.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(g.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(g.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(g.headers.clientUA=e.AuthData.ClientUA),e.AuthData.XCosSecurityToken&&(g.headers["x-cos-security-token"]=e.AuthData.XCosSecurityToken),g.headers&&(g.headers=o.clearKey(g.headers)),g=o.clearKey(g),e.onProgress&&"function"==typeof e.onProgress&&(g.onProgress=function(t){if(!i||n._isRunningTask(i)){var r=t?t.loaded:0;e.onProgress({loaded:r,total:t.total})}});var m=r(g,function(e,r,a){var s,c=function(e,a){if(i&&n.off("inner-kill-task",y),!s){s=!0;var c={};r&&r.statusCode&&(c.statusCode=r.statusCode),r&&r.headers&&(c.headers=r.headers),e?(e=o.extend(e||{},c),t(e,null)):(a=o.extend(a||{},c),t(null,a))}};if(e)c({error:e});else{var u;try{u=o.xml2json(a)||{}}catch(e){u=a||{}}var l=r.statusCode,d=2===Math.floor(l/100);d?(p&&((u={}).body=a),u.Error?c({error:u.Error}):c(null,u)):c({error:u.Error||u})}}),y=function(e){e.TaskId===i&&(m&&m.abort&&m.abort(),n.off("inner-kill-task",y))};i&&n.on("inner-kill-task",y)}.call(n,e,t)):t("authorization error")})}var l={getService:function(e,t){"function"==typeof e&&(t=e,e={});var n=this.options.ServiceDomain,r=e.AppId||this.options.appId;n?(n=n.replace(/\{\{AppId\}\}/gi,r||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(n)||(n="https://"+n),"/"===n.slice(-1)&&(n=n.slice(0,-1))):n="https://service.cos.myqcloud.com",u.call(this,{url:n+"/",method:"GET"},function(e,n){if(e)return t(e);var r=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Buckets&&n.ListAllMyBucketsResult.Buckets.Bucket||[];r=o.isArray(r)?r:[r],t(null,{Buckets:r,statusCode:n.statusCode,headers:n.headers})})},putBucket:function(e,t){var n=this,r={};r["x-cos-acl"]=e.ACL,r["x-cos-grant-read"]=e.GrantRead,r["x-cos-grant-write"]=e.GrantWrite,r["x-cos-grant-read-acp"]=e.GrantReadAcp,r["x-cos-grant-write-acp"]=e.GrantWriteAcp,r["x-cos-grant-full-control"]=e.GrantFullControl,u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r},function(r,o){if(r)return t(r);var i=s({domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:i,statusCode:o.statusCode,headers:o.headers})})},getBucket:function(e,t){var n={};n.prefix=e.Prefix,n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);var r=n.ListBucketResult||{},i=r.Contents||[],a=r.CommonPrefixes||[];i=o.isArray(i)?i:[i],a=o.isArray(a)?a:[a];var s=o.clone(r);o.extend(s,{Contents:i,CommonPrefixes:a,statusCode:n.statusCode,headers:n.headers}),t(null,s)})},headBucket:function(e,t){u.call(this,{Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},function(e,n){t(e,n)})},deleteBucket:function(e,t){u.call(this,{Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketAcl:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},function(e,n){if(e)return t(e);var r=n.AccessControlPolicy||{},a=r.Owner||{},s=r.AccessControlList.Grant||[];s=o.isArray(s)?s:[s];var c=i(r);n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=o.extend(c,{Owner:a,Grants:s,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putBucketAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var i=o.clone(e.AccessControlPolicy||{}),s=i.Grants||i.Grant;s=o.isArray(s)?s:[s],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:s},r=o.json2xml({AccessControlPolicy:i}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=a(n[t]))}),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:r},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketCors:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var r={CORSRules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);else{var i=n.CORSConfiguration||{},a=i.CORSRules||i.CORSRule||[];a=o.clone(o.isArray(a)?a:[a]),o.each(a,function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t,n){var r=t+"s",i=e[r]||e[t]||[];delete e[t],e[r]=o.isArray(i)?i:[i]})}),t(null,{CORSRules:a,statusCode:n.statusCode,headers:n.headers})}})},putBucketCors:function(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=o.clone(o.isArray(n)?n:[n]),o.each(n,function(e){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t,n){var r=t+"s",i=e[r]||e[t]||[];delete e[r],e[t]=o.isArray(i)?i:[i]})});var r=o.json2xml({CORSConfiguration:{CORSRule:n}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=o.binaryBase64(o.md5(r)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"cors",headers:i},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},deleteBucketCors:function(e,t){u.call(this,{method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})},getBucketLocation:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},function(e,n){if(e)return t(e);t(null,n)})},putBucketTagging:function(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=o.clone(o.isArray(r)?r:[r]);var i=o.json2xml({Tagging:{TagSet:{Tag:r}}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=o.binaryBase64(o.md5(i)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,body:i,action:"tagging",headers:a},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketTagging:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var r={Tags:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else{var i=[];try{i=n.Tagging.TagSet.Tag||[]}catch(e){}i=o.clone(o.isArray(i)?i:[i]),t(null,{Tags:i,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketTagging:function(e,t){u.call(this,{method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketPolicy:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},function(e,n){if(e)return e.statusCode&&403===e.statusCode?t({ErrorStatus:"Access Denied"}):e.statusCode&&405===e.statusCode?t({ErrorStatus:"Method Not Allowed"}):e.statusCode&&404===e.statusCode?t({ErrorStatus:"Policy Not Found"}):t(e);var r={};try{r=JSON.parse(n.body)}catch(e){}t(null,{Policy:r,statusCode:n.statusCode,headers:n.headers})})},putBucketPolicy:function(e,t){var n=e.Policy,r=n;try{"string"==typeof n?n=JSON.parse(r):r=JSON.stringify(n)}catch(e){t({error:"Policy format error"})}var i=e.Headers;i["Content-Type"]="application/json",i["Content-MD5"]=o.binaryBase64(o.md5(r)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:o.isBrowser?r:n,headers:i,json:!0},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketLifecycle:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var r={Rules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);else{var i=[];try{i=n.LifecycleConfiguration.Rule||[]}catch(e){}i=o.clone(o.isArray(i)?i:[i]),t(null,{Rules:i,statusCode:n.statusCode,headers:n.headers})}})},putBucketLifecycle:function(e,t){var n=(e.LifecycleConfiguration||{}).Rules||[];n=o.clone(n);var r=o.json2xml({LifecycleConfiguration:{Rule:n}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=o.binaryBase64(o.md5(r)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"lifecycle",headers:i},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},deleteBucketLifecycle:function(e,t){u.call(this,{method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketVersioning:function(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},r=o.json2xml({VersioningConfiguration:n}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=o.binaryBase64(o.md5(r)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"versioning",headers:i},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t({error:"lack of param VersioningConfiguration"})},getBucketVersioning:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},function(e,n){e||(!n.VersioningConfiguration&&(n.VersioningConfiguration={}),!n.VersioningConfiguration.MFADelete&&(n.VersioningConfiguration.MFADelete="Disabled"),!n.VersioningConfiguration.Status&&(n.VersioningConfiguration.Status="Disabled")),t(e,n)})},putBucketReplication:function(e,t){var n=o.clone(e.ReplicationConfiguration);n.Rule=n.Rules,delete n.Rules;var r=o.json2xml({ReplicationConfiguration:n}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=o.binaryBase64(o.md5(r)),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"replication",headers:i},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketReplication:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var r={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else e||!n.ReplicationConfiguration&&(n.ReplicationConfiguration={}),t(e,n)})},deleteBucketReplication:function(e,t){u.call(this,{method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getObject:function(e,t){var n,r={};r["response-content-type"]=e.ResponseContentType,r["response-content-language"]=e.ResponseContentLanguage,r["response-expires"]=e.ResponseExpires,r["response-cache-control"]=e.ResponseCacheControl,r["response-content-disposition"]=e.ResponseContentDisposition,r["response-content-encoding"]=e.ResponseContentEncoding,n=o.isBrowser?"string":"buffer",u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,qs:r,rawBody:!0},function(r,i){if(r){var a=r.statusCode;return e.Headers["If-Modified-Since"]&&a&&304===a?t(null,{NotModified:!0}):t(r)}var s={};"string"===n&&(s.Body=i.body),o.extend(s,{statusCode:i.statusCode,headers:i.headers}),t(null,s)})},headObject:function(e,t){u.call(this,{method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(n,r){if(n){var o=n.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0,statusCode:o}):t(n)}t(null,r)})},listObjectVersions:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:{prefix:e.Prefix},action:"versions"},function(e,n){if(e)return t(e);var r=n.ListVersionsResult||{},i=r.DeleteMarker||[];i=o.isArray(i)?i:[i];var a=r.Version||[];a=o.isArray(a)?a:[a];var s=o.clone(r);delete s.DeleteMarker,delete s.Version,o.extend(s,{DeleteMarkers:i,Versions:a,statusCode:n.statusCode,headers:n.headers}),t(null,s)})},putObject:function(e,t){var n=this,r=e.Headers,o=e.Body;o&&"string"==typeof o?(r["Content-Length"]=o.length,u.call(this,{TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,body:o},function(r,o){if(r)return t(r);if(o&&o.headers&&o.headers.etag){var i=s({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});return t(null,{Location:i,ETag:o.headers.etag,statusCode:o.statusCode,headers:o.headers})}t(null,o)})):t({error:"params body format error, Only allow Buffer, Stream, Blob."})},postObject:function(e,t){var n=this,r={};r["Cache-Control"]=e.CacheControl,r["Content-Disposition"]=e.ContentDisposition,r["Content-Encoding"]=e.ContentEncoding,r["Content-MD5"]=e.ContentMD5,r["Content-Length"]=e.ContentLength,r["Content-Type"]=e.ContentType,r.Expect=e.Expect,r.Expires=e.Expires,r["x-cos-acl"]=e.ACL,r["x-cos-grant-read"]=e.GrantRead,r["x-cos-grant-write"]=e.GrantWrite,r["x-cos-grant-full-control"]=e.GrantFullControl,r["x-cos-storage-class"]=e.StorageClass;var i=e.FilePath;for(var a in e)a.indexOf("x-cos-meta-")>-1&&(r[a]=e[a]);var c=o.throttleOnProgress.call(n,r["Content-Length"],e.onProgress);u.call(this,{method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,filePath:i,onProgress:c},function(r,o){if(c(null,!0),r)return t(r);if(o){var i=s({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});return t(null,{Location:i,statusCode:o.statusCode})}t(null,o)})},deleteObject:function(e,t){u.call(this,{method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},function(e,n){if(e){var r=e.statusCode;return r&&204===r?t(null,{statusCode:r}):r&&404===r?t(null,{BucketNotFound:!0,statusCode:r}):t(e)}t(null,{statusCode:n.statusCode,headers:n.headers})})},getObjectAcl:function(e,t){u.call(this,{method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},function(e,n){if(e)return t(e);var r=n.AccessControlPolicy||{},a=r.Owner||{},s=r.AccessControlList&&r.AccessControlList.Grant||[];s=o.isArray(s)?s:[s];var c=i(r);n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=o.extend(c,{Owner:a,Grants:s,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putObjectAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var i=o.clone(e.AccessControlPolicy||{}),s=i.Grants||i.Grant;s=o.isArray(s)?s:[s],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:s},r=o.json2xml({AccessControlPolicy:i}),n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(r))}o.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=a(n[t]))}),u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:r},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},optionsObject:function(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,u.call(this,{method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},function(e,n){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var r=n.headers||{};t(null,{AccessControlAllowOrigin:r["access-control-allow-origin"],AccessControlAllowMethods:r["access-control-allow-methods"],AccessControlAllowHeaders:r["access-control-allow-headers"],AccessControlExposeHeaders:r["access-control-expose-headers"],AccessControlMaxAge:r["access-control-max-age"],statusCode:n.statusCode,headers:n.headers})})},putObjectCopy:function(e,t){u.call(this,{method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(e,n){if(e)return t(e);var r=o.clone(n.CopyObjectResult||{});o.extend(r,{statusCode:n.statusCode,headers:n.headers}),t(null,r)})},restoreObject:function(e,t){var n=e.Headers;if(e.RestoreRequest){var r=e.RestoreRequest||{},i=o.json2xml({RestoreRequest:r});n["Content-Type"]="application/xml",n["Content-MD5"]=o.binaryBase64(o.md5(i)),u.call(this,{method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:i,action:"restore",headers:n},function(e,n){t(e,n)})}else t({error:"lack of param RestoreRequest"})},getObjectUrl:function(e,t){var n=s({protocol:this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:n}),n;var r=c.call(this,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key},function(e){if(t){var r={Url:n+"?sign="+encodeURIComponent(e.Authorization)};e.XCosSecurityToken&&(r.XCosSecurityToken=e.XCosSecurityToken),e.ClientIP&&(r.ClientIP=e.ClientIP),e.ClientUA&&(r.ClientUA=e.ClientUA),e.Token&&(r.Token=e.Token),setTimeout(function(){t(null,r)})}});return r?n+"?sign="+encodeURIComponent(r):n},getAuth:function(e){return o.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires})}};o.each(l,function(e,n){t[n]=o.apiWrapper(n,e)})},function(e,t,n){var r=n(0);e.exports.init=function(e){var t=[],n={},o=0,i=0,a={};r.each(["postObject"],function(t){a[t]=e[t],e[t]=function(n,r){e._addTask(t,n,r)}});var s=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent};return e.FilePath&&(t.FilePath=e.FilePath),t},c=function(){e.emit("list-update",{list:r.map(t,s)})},u=function(){if(i<t.length&&o<e.options.FileParallelLimit){var n=t[i];"waiting"===n.state&&(o++,n.state="checking",!n.params.UploadData&&(n.params.UploadData={}),a[n.api].call(e,n.params,function(t,r){"checking"!==n.state&&"uploading"!==n.state||(n.state=t?"error":"success",o--,u(e),n.callback&&n.callback(t,r),"success"===n.state&&(delete n.params,delete n.callback))}),c()),i++,u(e)}},l=function(t,r){var i=n[t];if(i){var a=i&&"waiting"===i.state,s=i&&("checking"===i.state||"uploading"===i.state);if(a||s||"canceled"===r&&"paused"===i.state){if("paused"===r&&i.params.Body&&"function"==typeof i.params.Body.pipe)return void console.error("stream not support pause");i.state=r,e.emit("inner-kill-task",{TaskId:t}),c(),s&&(o--,u(e)),"canceled"===r&&(delete i.params,delete i.callback)}}};e._addTasks=function(t){r.each(t,function(t){t.params.IgnoreAddEvent=!0,e._addTask(t.api,t.params,t.callback)}),c()},e._addTask=function(o,i,a){var s,l=r.uuid();i.TaskReady&&i.TaskReady(l),i.Body&&i.Body.size?s=i.Body.size:i.Body&&i.Body.length?s=i.Body.length:void 0!==i.ContentLength&&(s=i.ContentLength),void 0===i.ContentLength&&(i.ContentLength=s),i.TaskId=l;var d={params:i,callback:a,api:o,index:t.length,id:l,Bucket:i.Bucket,Region:i.Region,Key:i.Key,FilePath:i.FilePath||"",state:"waiting",loaded:0,size:s,speed:0,percent:0,hashPercent:0},f=i.onHashProgress;i.onHashProgress=function(t){e._isRunningTask(d.id)&&(d.hashPercent=t.percent,f&&f(t),c())};var h=i.onProgress;return i.onProgress=function(t){e._isRunningTask(d.id)&&("checking"===d.state&&(d.state="uploading"),d.loaded=t.loaded,d.speed=t.speed,d.percent=t.percent,h&&h(t),c())},t.push(d),n[l]=d,!i.IgnoreAddEvent&&c(),u(e),l},e._isRunningTask=function(e){var t=n[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return r.map(t,s)},e.cancelTask=function(e){l(e,"canceled")},e.pauseTask=function(e){l(e,"paused")},e.restartTask=function(e){var t=n[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",c(),i=Math.min(i,t.index),u())}}},function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){n(e).push(t)},e.off=function(e,t){for(var r=n(e),o=r.length-1;o>=0;o--)t===r[o]&&r.splice(o,1)},e.emit=function(e,t){for(var r=n(e).map(function(e){return e}),o=0;o<r.length;o++)r[o](t)}};e.exports.init=n,e.exports.EventProxy=function(){n(this)}},function(e,t){var n,r,o,i,a,s,c,u,l,d,f,h,p,g,m,y,v,C,x,A=(r=(n=n||{}).Base64,i=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a=String.fromCharCode,s=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(c,s)},l=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)].join("")},d=n.btoa?function(e){return n.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,l)},f=function(e){return d(u(e))},h=function(e,t){return t?f(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):f(String(e))},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=function(e){return e.replace(p,g)},y=function(e){var t=e.length,n=t%4,r=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),o=[a(r>>>16),a(r>>>8&255),a(255&r)];return o.length-=[0,0,2,1][n],o.join("")},v=n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},C=function(e){return m(v(e))},{VERSION:"2.1.9",atob:v,btoa:d,fromBase64:x=function(e){return C(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},toBase64:h,utob:u,encode:h,encodeURI:function(e){return h(e,!0)},btou:m,decode:x,noConflict:function(){var e=n.Base64;return n.Base64=r,e}});e.exports=A},function(e,t){var n=new RegExp("^([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�])|^((x|X)(m|M)(l|L))|([^a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�-.0-9·̀-ͯ‿⁀])","g"),r=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,o=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},i=function(e,t){var i=function(e,r,o,i,a){var s=void 0!==t.indent?t.indent:"\t",c=t.prettyPrint?"\n"+new Array(i).join(s):"";t.removeIllegalNameCharacters&&(e=e.replace(n,"_"));var u=[c,"<",e,o||""];return r&&r.length>0?(u.push(">"),u.push(r),a&&u.push(c),u.push("</"),u.push(e),u.push(">")):u.push("/>"),u.join("")};return function e(n,a,s){var c=typeof n;switch((Array.isArray?Array.isArray(n):n instanceof Array)?c="array":n instanceof Date&&(c="date"),c){case"array":var u=[];return n.map(function(t){u.push(e(t,1,s+1))}),t.prettyPrint&&u.push("\n"),u.join("");case"date":return n.toJSON?n.toJSON():n+"";case"object":var l=[];for(var d in n)if(n[d]instanceof Array)for(var f in n[d])l.push(i(d,e(n[d][f],0,s+1),null,s+1,o(n[d][f]).length));else l.push(i(d,e(n[d],0,s+1),null,s+1));return t.prettyPrint&&l.length>0&&l.push("\n"),l.join("");case"function":return n();default:return t.escape?(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(r,""):""+n}}(e,0,0)},a=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};e.exports=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  "}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",r="";return t&&("object"==typeof t?(t.xmlHeader&&(n=a(!!t.xmlHeader.standalone)),void 0!==t.docType&&(r="<!DOCTYPE "+t.docType+">")):n=a()),[n,(t=t||{}).prettyPrint&&r?"\n":"",r,i(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),i=0,a=1,s=2,c=3,u=4,l=5,d=6,f=7;function h(){}function p(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,r,o,h){for(var p,g=++t,m=i;;){var y=e.charAt(g);switch(y){case"=":if(m===a)p=e.slice(t,g),m=c;else{if(m!==s)throw new Error("attribute equal must after attrName");m=c}break;case"'":case'"':if(m===c||m===a){if(m===a&&(h.warning('attribute value must after "="'),p=e.slice(t,g)),t=g+1,!((g=e.indexOf(y,t))>0))throw new Error("attribute value no end '"+y+"' match");v=e.slice(t,g).replace(/&#?\w+;/g,o),n.add(p,v,t-1),m=l}else{if(m!=u)throw new Error('attribute value must after "="');v=e.slice(t,g).replace(/&#?\w+;/g,o),n.add(p,v,t),h.warning('attribute "'+p+'" missed start quot('+y+")!!"),t=g+1,m=l}break;case"/":switch(m){case i:n.setTagName(e.slice(t,g));case l:case d:case f:m=f,n.closed=!0;case u:case a:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),m==i&&n.setTagName(e.slice(t,g)),g;case">":switch(m){case i:n.setTagName(e.slice(t,g));case l:case d:case f:break;case u:case a:"/"===(v=e.slice(t,g)).slice(-1)&&(n.closed=!0,v=v.slice(0,-1));case s:m===s&&(v=p),m==u?(h.warning('attribute "'+v+'" missed quot(")!!'),n.add(p,v.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===r[""]&&v.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),n.add(v,v,t));break;case c:throw new Error("attribute value missed!!")}return g;case"":y=" ";default:if(y<=" ")switch(m){case i:n.setTagName(e.slice(t,g)),m=d;break;case a:p=e.slice(t,g),m=s;break;case u:var v=e.slice(t,g).replace(/&#?\w+;/g,o);h.warning('attribute "'+v+'" missed quot(")!!'),n.add(p,v,t);case l:m=d}else switch(m){case s:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&p.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!'),n.add(p,p,t),t=g,m=a;break;case l:h.warning('attribute space is required"'+p+'"!!');case d:m=a,t=g;break;case c:m=u,t=g;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function m(e,t,n){for(var r=e.tagName,o=null,i=e.length;i--;){var a=e[i],s=a.qName,c=a.value;if((f=s.indexOf(":"))>0)var u=a.prefix=s.slice(0,f),l=s.slice(f+1),d="xmlns"===u&&l;else l=s,u=null,d="xmlns"===s&&"";a.localName=l,!1!==d&&(null==o&&(o={},C(n,n={})),n[d]=o[d]=c,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,c))}for(i=e.length;i--;){(u=(a=e[i]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]))}var f;(f=r.indexOf(":"))>0?(u=e.prefix=r.slice(0,f),l=e.localName=r.slice(f+1)):(u=null,l=e.localName=r);var h=e.uri=n[u||""];if(t.startElement(h,l,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(h,l,r),o)for(u in o)t.endPrefixMapping(u)}function y(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(n)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,r),o.characters(a,0,a.length),i)}return t+1}function v(e,t,n,r){var o=r[n];return null==o&&((o=e.lastIndexOf("</"+n+">"))<t&&(o=e.lastIndexOf("</"+n)),r[n]=o),o<t}function C(e,t){for(var n in e)t[n]=e[n]}function x(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var i=function(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=t,o.exec(e);for(;n=o.exec(e);)if(r.push(n),n[1])return r}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var s=i[1][0],c=a>3&&/^public$/i.test(i[2][0])&&i[3][0],u=a>4&&i[4][0],l=i[a-1];return n.startDTD(s,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function A(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return n.processingInstruction(o[1],o[2]),r+2}return-1}return-1}function b(e){}function w(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),C(t,t={}),function(e,t,n,r,o){function i(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function a(t){if(t>C){var n=e.substring(C,t).replace(/&#?\w+;/g,i);d&&s(C),r.characters(n,0,t-C),C=t}}function s(t,n){for(;t>=u&&(n=l.exec(e));)c=n.index,u=c+n[0].length,d.lineNumber++;d.columnNumber=t-c+1}var c=0,u=0,l=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,f=[{currentNSMap:t}],h={},C=0;for(;;){try{var w=e.indexOf("<",C);if(w<0){if(!e.substr(C).match(/^\s*$/)){var N=r.doc,T=N.createTextNode(e.substr(C));N.appendChild(T),r.currentElement=T}return}switch(w>C&&a(w),e.charAt(w+1)){case"/":var R=e.indexOf(">",w+3),_=e.substring(w+2,R),E=f.pop();R<0?(_=e.substring(w+2).replace(/[\s<].*/,""),o.error("end tag name: "+_+" is not complete:"+E.tagName),R=w+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),o.error("end tag name: "+_+" maybe not complete"),R=w+1+_.length);var S=E.localNSMap,k=E.tagName==_,D=k||E.tagName&&E.tagName.toLowerCase()==_.toLowerCase();if(D){if(r.endElement(E.uri,E.localName,_),S)for(var B in S)r.endPrefixMapping(B);k||o.fatalError("end tag name: "+_+" is not match the current start tagName:"+E.tagName)}else f.push(E);R++;break;case"?":d&&s(w),R=A(e,w,r);break;case"!":d&&s(w),R=x(e,w,r,o);break;default:d&&s(w);var O=new b,I=f[f.length-1].currentNSMap,R=g(e,w,O,I,i,o),M=O.length;if(!O.closed&&v(e,R,O.tagName,h)&&(O.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),d&&M){for(var P=p(d,{}),F=0;F<M;F++){var L=O[F];s(L.offset),L.locator=p(d,{})}r.locator=P,m(O,r,I)&&f.push(O),r.locator=d}else m(O,r,I)&&f.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?R++:R=y(e,R,O.tagName,i,r)}}catch(e){o.error("element parse error: "+e),R=-1}R>C?C=R:a(Math.max(w,C)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},b.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},w({},w.prototype)instanceof w||(w=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=h},function(e,t,n){function r(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function i(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new u,i=n.domBuilder||new o,s=n.errorHandler,c=n.locator,l=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&i.setDocumentLocator(c),r.errorHandler=function(e,t,n){if(!e){if(t instanceof o)return t;e=t}var r={},i=e instanceof Function;function s(t){var o=e[t];!o&&i&&(o=2==e.length?function(n){e(t,n)}:e),r[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,i,c),r.domBuilder=n.domBuilder||i,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,l,d):r.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,a=o.createElementNS(e,n||t),s=r.length;c(this,a),this.currentElement=a,this.locator&&i(this.locator,a);for(var u=0;u<s;u++){e=r.getURI(u);var l=r.getValue(u),d=(n=r.getQName(u),o.createAttributeNS(e,n));this.locator&&i(r.getLocator(u),d),d.value=d.nodeValue=l,a.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&i(this.locator,n),c(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&i(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&i(this.locator,r),c(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&i(this.locator,o),c(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var u=n(8).XMLReader,l=t.DOMImplementation=n(1).DOMImplementation;t.XMLSerializer=n(1).XMLSerializer,t.DOMParser=r},function(e,t,n){var r=n(9).DOMParser,o=function(e){"use strict";e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0);e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0);e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0);void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0);e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1);e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}();var t={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function n(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,r){for(var o=0;o<e.length;o++){var i=e[o];if("string"==typeof i){if(i==r)break}else if(i instanceof RegExp){if(i.test(r))break}else if("function"==typeof i&&i(t,n,r))break}return o!=e.length}function a(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function s(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var o=60*t[6]+Number(t[7]);o=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*o:o),n.setMinutes(n.getMinutes()-o-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function c(n,r,o,a){return!(r==t.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,n,o,a)}function u(r,o){if(r.nodeType==t.DOCUMENT_NODE){for(var l=new Object,d=r.childNodes,f=0;f<d.length;f++){if((h=d.item(f)).nodeType==t.ELEMENT_NODE)l[p=n(h)]=u(h,p)}return l}if(r.nodeType==t.ELEMENT_NODE){(l=new Object).__cnt=0;for(d=r.childNodes,f=0;f<d.length;f++){var h,p=n(h=d.item(f));if(h.nodeType!=t.COMMENT_NODE){var g=o+"."+p;c(l,h.nodeType,p,g)&&(l.__cnt++,null==l[p]?(l[p]=u(h,g),a(l,p,g)):(null!=l[p]&&(l[p]instanceof Array||(l[p]=[l[p]],a(l,p,g))),l[p][l[p].length]=u(h,g)))}}for(var m=0;m<r.attributes.length;m++){var y=r.attributes.item(m);l.__cnt++,l[e.attributePrefix+y.name]=y.value}var v=function(e){return e.prefix}(r);return null!=v&&""!=v&&(l.__cnt++,l.__prefix=v),null!=l["#text"]&&(l.__text=l["#text"],l.__text instanceof Array&&(l.__text=l.__text.join("\n")),e.stripWhitespaces&&(l.__text=l.__text.trim()),delete l["#text"],"property"==e.arrayAccessForm&&delete l["#text_asArray"],l.__text=function(t,n,r){if(e.datetimeAccessFormPaths.length>0){var o=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,o)?s(t):t}return t}(l.__text,p,o+"."+p)),null!=l["#cdata-section"]&&(l.__cdata=l["#cdata-section"],delete l["#cdata-section"],"property"==e.arrayAccessForm&&delete l["#cdata-section_asArray"]),0==l.__cnt&&"text"==e.emptyNodeForm?l="":1==l.__cnt&&null!=l.__text?l=l.__text:1!=l.__cnt||null==l.__cdata||e.keepCData?l.__cnt>1&&null!=l.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==l.__text||""==l.__text.trim())&&delete l.__text:l=l.__cdata,delete l.__cnt,!e.enableToStringFunc||null==l.__text&&null==l.__cdata||(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),l}if(r.nodeType==t.TEXT_NODE||r.nodeType==t.CDATA_SECTION_NODE)return r.nodeValue}function l(t,n,r,i){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var s=0;s<r.length;s++){var c=r[s],u=t[c];e.escapeMode&&(u=o(u)),a+=" "+c.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?a+='"'+u+'"':a+="'"+u+"'"}return a+=i?"/>":">"}function d(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function f(t,n){return"property"==e.arrayAccessForm&&(r=n.toString(),o="_asArray",-1!==r.indexOf(o,r.length-o.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var r,o}function h(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function p(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function g(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function m(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=o(t.__text):n+=t.__text),n}(t):null!=t&&(e.escapeMode?n+=o(t):n+=t),n}function y(e,t){return""===e?t:e+"."+t}function v(e,t,n,r){var o="";if(0==e.length)o+=l(e,t,n,!0);else for(var i=0;i<e.length;i++)o+=l(e[i],t,g(e[i]),!1),o+=C(e[i],y(r,t)),o+=d(e[i],t);return o}function C(e,t){var n="";if(h(e)>0)for(var r in e)if(!f(e,r)&&(""==t||p(e,r,y(t,r)))){var o=e[r],i=g(o);if(null==o||void 0==o)n+=l(o,r,i,!0);else if(o instanceof Object)if(o instanceof Array)n+=v(o,r,i,t);else if(o instanceof Date)n+=l(o,r,i,!1),n+=o.toISOString(),n+=d(o,r);else{h(o)>0||null!=o.__text||null!=o.__cdata?(n+=l(o,r,i,!1),n+=C(o,y(t,r)),n+=d(o,r)):n+=l(o,r,i,!0)}else n+=l(o,r,i,!1),n+=m(o),n+=d(o,r)}return n+=m(e)}this.parseXmlString=function(e){var t;if(void 0===e)return null;if(r){var n=new r,o=null;try{o=n.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){o=null}try{t=n.parseFromString(e,"text/xml"),null!=o&&t.getElementsByTagNameNS(o,"parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?s(e):e},this.xml2json=function(e){return u(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return C(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}};e.exports=function(e){var t=(new r).parseFromString(e,"text/xml"),n=(new o).xml2json(t);return n.html&&n.getElementsByTagName("parsererror").length?null:n}},function(e,t){var n,r,o,i,a,s,c,u=u||function(e,t){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;o<e;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,o=e.min(4*t,o),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=o}return new a.init(c,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);r=(a=(n=u).lib).WordArray,o=a.Hasher,i=[],a=n.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+i[u],l=20>u?l+(1518500249+(o&a|~o&s)):40>u?l+(1859775393+(o^a^s)):60>u?l+((o&a|o&s|a&s)-1894007588):l+((o^a^s)-899497514),c=s,s=a,a=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(a),n.HmacSHA1=o._createHmacHelper(a),function(){var e=u,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,o=4*r;n.sigBytes>o&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),s=i.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),c=(s=u).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,r=n.charAt(64);if(r){var o=e.indexOf(r);-1!=o&&(t=o)}for(var i=[],a=0,s=0;s<t;s++)if(s%4){var u=n.indexOf(e.charAt(s-1))<<s%4*2,l=n.indexOf(e.charAt(s))>>>6-s%4*2;i[a>>>2]|=(u|l)<<24-a%4*8,a++}return c.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=u},function(e,t){e.exports=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,o,i,a;return o=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^o^i:n|r?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function r(e,r,o,i,a,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,o,i),a),c)),s),r)}function o(e,r,o,i,a,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,o,i),a),c)),s),r)}function i(e,r,o,i,a,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e^t^n}(r,o,i),a),c)),s),r)}function a(e,r,o,i,a,s,c){return n(t(e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,o,i),a),c)),s),r)}function s(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var c,u,l,d,f,h,p,g,m,y=Array();for(y=function(e){for(var t,n=e.length,r=n+8,o=16*((r-r%64)/64+1),i=Array(o-1),a=0,s=0;s<n;)a=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<a,i[o-2]=n<<3,i[o-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),h=1732584193,p=4023233417,g=2562383102,m=271733878,c=0;c<y.length;c+=16)u=h,l=p,d=g,f=m,p=a(p=a(p=a(p=a(p=i(p=i(p=i(p=i(p=o(p=o(p=o(p=o(p=r(p=r(p=r(p=r(p,g=r(g,m=r(m,h=r(h,p,g,m,y[c+0],7,3614090360),p,g,y[c+1],12,3905402710),h,p,y[c+2],17,606105819),m,h,y[c+3],22,3250441966),g=r(g,m=r(m,h=r(h,p,g,m,y[c+4],7,4118548399),p,g,y[c+5],12,1200080426),h,p,y[c+6],17,2821735955),m,h,y[c+7],22,4249261313),g=r(g,m=r(m,h=r(h,p,g,m,y[c+8],7,1770035416),p,g,y[c+9],12,2336552879),h,p,y[c+10],17,4294925233),m,h,y[c+11],22,2304563134),g=r(g,m=r(m,h=r(h,p,g,m,y[c+12],7,1804603682),p,g,y[c+13],12,4254626195),h,p,y[c+14],17,2792965006),m,h,y[c+15],22,1236535329),g=o(g,m=o(m,h=o(h,p,g,m,y[c+1],5,4129170786),p,g,y[c+6],9,3225465664),h,p,y[c+11],14,643717713),m,h,y[c+0],20,3921069994),g=o(g,m=o(m,h=o(h,p,g,m,y[c+5],5,3593408605),p,g,y[c+10],9,38016083),h,p,y[c+15],14,3634488961),m,h,y[c+4],20,3889429448),g=o(g,m=o(m,h=o(h,p,g,m,y[c+9],5,568446438),p,g,y[c+14],9,3275163606),h,p,y[c+3],14,4107603335),m,h,y[c+8],20,1163531501),g=o(g,m=o(m,h=o(h,p,g,m,y[c+13],5,2850285829),p,g,y[c+2],9,4243563512),h,p,y[c+7],14,1735328473),m,h,y[c+12],20,2368359562),g=i(g,m=i(m,h=i(h,p,g,m,y[c+5],4,4294588738),p,g,y[c+8],11,2272392833),h,p,y[c+11],16,1839030562),m,h,y[c+14],23,4259657740),g=i(g,m=i(m,h=i(h,p,g,m,y[c+1],4,2763975236),p,g,y[c+4],11,1272893353),h,p,y[c+7],16,4139469664),m,h,y[c+10],23,3200236656),g=i(g,m=i(m,h=i(h,p,g,m,y[c+13],4,681279174),p,g,y[c+0],11,3936430074),h,p,y[c+3],16,3572445317),m,h,y[c+6],23,76029189),g=i(g,m=i(m,h=i(h,p,g,m,y[c+9],4,3654602809),p,g,y[c+12],11,3873151461),h,p,y[c+15],16,530742520),m,h,y[c+2],23,3299628645),g=a(g,m=a(m,h=a(h,p,g,m,y[c+0],6,4096336452),p,g,y[c+7],10,1126891415),h,p,y[c+14],15,2878612391),m,h,y[c+5],21,4237533241),g=a(g,m=a(m,h=a(h,p,g,m,y[c+12],6,1700485571),p,g,y[c+3],10,2399980690),h,p,y[c+10],15,4293915773),m,h,y[c+1],21,2240044497),g=a(g,m=a(m,h=a(h,p,g,m,y[c+8],6,1873313359),p,g,y[c+15],10,4264355552),h,p,y[c+6],15,2734768916),m,h,y[c+13],21,1309151649),g=a(g,m=a(m,h=a(h,p,g,m,y[c+4],6,4149444226),p,g,y[c+11],10,3174756917),h,p,y[c+2],15,718787259),m,h,y[c+9],21,3951481745),h=n(h,u),p=n(p,l),g=n(g,d),m=n(m,f);return(s(h)+s(p)+s(g)+s(m)).toLowerCase()}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(0),o=n(5),i=n(4),a=n(3),s={SecretId:"",SecretKey:"",FileParallelLimit:3,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:""},c=function(e){this.options=r.extend(r.clone(s),e||{}),o.init(this),i.init(this)};r.extend(c.prototype,a),c.getAuthorization=r.getAuth,c.version="0.5.0",e.exports=c},function(e,t,n){var r=n(14);e.exports=r}])});